import{k as i,n as r,f as l,ao as d,b as o,c as f,ap as v,al as g,aj as h,E as U,o as b,j as u,h as $}from"./index-4791bb42.js";import{c as A,a as x,b as y}from"./VDataTable-7fa4aa40.js";import{_ as k}from"./VCheckbox-45eeed32.js";import{_ as w}from"./VFileInput-c07a06f3.js";class F{getAllUsers(){return i.get("/user")}addAppUser(e){return i.post("/user",e)}}const c=new F,C={name:"appUserForm",props:{value:Boolean},computed:{show:{get(){return this.value},set(a){this.$emit("input",a)}}},data(){return{PDFLayoutAttachment:void 0,form:{companyCode:"",documentType:"",isDefault:0,appUserDto:{appUserName:"",appUserUserName:"",appUserEmailAddress:"",appUserRoles:[]}},itemsDocumentType:["Invoice","Reminder"],formValid:!1}},methods:{async submitForm(a){this.$store.commit("setIsLoading",!0),await c.addAppUser(a).then(e=>{console.log("succesfully added user!"),this.$refs.form.reset()}).catch(e=>{console.log(e),this.$toast.error(e.message)}),this.$store.commit("setIsLoading",!1)}}};var D=function(){var e=this,s=e._self._c;return s(A,{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"form-group"},[s(l,{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[s(d,[s(o,{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[s(f,[e._v("mdi-close")])],1),s(v,[e._v("Voeg een gebruiker toe")]),s(g),s(o,{attrs:{disabled:!e.formValid},on:{click:function(t){return e.submitForm(e.form)}}},[e._v("Opslaan")])],1),s(h,{ref:"form",model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[s("div",{staticClass:"form-group"},[s(U,{attrs:{counter:50,label:"Bedrijf",required:""},model:{value:e.form.companyCode,callback:function(t){e.$set(e.form,"companyCode",t)},expression:"form.companyCode"}})],1),s("div",{staticClass:"form-group"},[s(x,{attrs:{items:e.itemsDocumentType,label:"Type document",required:""},model:{value:e.form.documentType,callback:function(t){e.$set(e.form,"documentType",t)},expression:"form.documentType"}})],1),s(k,{attrs:{"true-value":1,"false-value":0,label:"Standaard voor dit bedrijf?"},model:{value:e.form.isDefault,callback:function(t){e.$set(e.form,"isDefault",t)},expression:"form.isDefault"}}),s(w,{attrs:{accept:".xml"},model:{value:e.PDFLayoutAttachment,callback:function(t){e.PDFLayoutAttachment=t},expression:"PDFLayoutAttachment"}}),s("div",{staticClass:"form-group"})],1)],1)],1)])},T=[],V=r(C,D,T,!1,null,null,null,null);const p=V.exports,L={name:"appUserList",data(){return{showAppUserForm:!1,appUsers:[],headers:[{text:"Id",value:"id",align:"start",sortable:!1},{text:"Naam",value:"name",align:"start",sortable:!1},{text:"Gebruikersnaam",value:"username",sortable:!0},{text:"Emailadres",value:"emailaddress",sortable:!0},{text:"Rollen",value:"roles",sortable:!0},{text:"Acties",value:"actions",sortable:!1}],page:1,count:0,pageSize:10}},methods:{getRequestParams(a,e,s){let t={};return a&&(t.title=a),e&&(t.page=e-1),s&&(t.size=s),t},async retrieveAppUsers(){this.$store.commit("setIsLoading",!0);const a=this.getRequestParams(this.searchTitle,this.page,this.pageSize);await c.getAllUsers(a).then(e=>{console.log(e.data.appUsers),this.appUsers=e.data.appUsers}).catch(e=>{console.log(e),this.$toast.error(e.message)}),this.$store.commit("setIsLoading",!1)}},mounted(){this.retrieveAppUsers()},components:{AppUserForm:p}};var P=function(){var e=this,s=e._self._c;return s(b,{staticClass:"list px-3 mx-auto",attrs:{"align-content":"center"}},[s(u,{attrs:{cols:"12",sm:"4"}},[s(o,{attrs:{small:""},on:{click:function(t){t.stopPropagation(),e.showAppUserForm=!0}}},[e._v(" Toevoegen ")])],1),s(p,{model:{value:e.showAppUserForm,callback:function(t){e.showAppUserForm=t},expression:"showAppUserForm"}}),s(u,{attrs:{cols:"12",sm:"12"}},[s(l,{staticClass:"mx-auto",attrs:{tile:""}},[s(y,{attrs:{headers:e.headers,items:e.appUsers,"item-key":"userId","hide-default-footer":!0,"items-per-page":10,"no-data-text":"Geen gebruikers gevonden"},scopedSlots:e._u([{key:"item.roles",fn:function({item:t}){return e._l(t.roles,function(n,_){return s("div",[e._v(" "+e._s(n.name)+" "),_!=t.roles.length-1?s("div",[e._v(" , ")]):e._e()])})}},{key:"item.actions",fn:function({item:t}){return[s(o,{attrs:{small:""},on:{click:function(n){n.stopPropagation(),e.showAppUserForm=!0}}},[e._v(" Update ")]),s(o,{attrs:{small:"",disabled:!0},on:{click:function(n){return e.deleteAppUser(t.id)}}},[e._v(" Verwijderen ")])]}}],null,!0)})],1)],1)],1)},R=[],I=r(L,P,R,!1,null,null,null,null);const m=I.exports,j={name:"adminUserView",data(){return{}},components:{AppUserList:m}};var S=function(){var e=this,s=e._self._c;return s("div",{staticClass:"Admin users"},[s(l,{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[s($,{attrs:{left:""}},[e._v("Beheer de gebruikers")]),s("div",[s(m)],1)],1)],1)},q=[],z=r(j,S,q,!1,null,null,null,null);const O=z.exports;export{O as default};
